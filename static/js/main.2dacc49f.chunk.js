(this.webpackJsonpmessenger=this.webpackJsonpmessenger||[]).push([[0],{23:function(e,s,t){},24:function(e,s,t){},29:function(e,s,t){"use strict";t.r(s);var n=t(8),a=t.n(n),c=t(16),i=t.n(c),r=(t(23),t(24),t(18)),o=t(12),l=t(10);l.a.initializeApp({apiKey:"AIzaSyCgMy5SwkF4IerJDZo5QW0y2fv_TCLDiC4",authDomain:"messenger-14380.firebaseapp.com",projectId:"messenger-14380",storageBucket:"messenger-14380.appspot.com",messagingSenderId:"720126724197",appId:"1:720126724197:web:880c26674c43f27f655e8c",measurementId:"G-MFYHSC4LL2"});var j=l.a.auth(),d=l.a.firestore(),m=t(3),u=Object(n.createContext)(),b=function(e){var s=Object(n.useState)(null),t=Object(o.a)(s,2),a=t[0],c=t[1],i=Object(n.useState)(!0),b=Object(o.a)(i,2),h=b[0],g=b[1],p=Object(n.useState)([]),O=Object(o.a)(p,2),x=O[0],v=O[1];return Object(n.useEffect)((function(){j.onAuthStateChanged((function(e){c(e),g(!1)})),d.collection("message").orderBy("currentTime","desc").onSnapshot((function(e){console.log("all messages",e.docs),v(e.docs.map((function(e){return Object(r.a)({id:e.id},e.data())})))}))}),[]),Object(m.jsx)(u.Provider,{value:{register:function(){var e=new l.a.auth.GoogleAuthProvider;l.a.auth().signInWithPopup(e).then((function(s){l.a.auth().signInWithRedirect(e)}))},user:a,loader:h,logout:function(){j.signOut().then((function(){c(null)}))},sendMessage:function(e){d.collection("message").add({msg:e,username:a.displayName,photo:a.photoURL,email:a.email,currentTime:l.a.firestore.FieldValue.serverTimestamp()})},AllMsg:x},children:e.children})},h=function(){var e=a.a.useContext(u),s=e.register,t=e.user,n=e.loader,c=e.logout,i=function(){s()},r=function(){c()};return Object(m.jsx)("div",{className:"navbar",children:Object(m.jsxs)("div",{className:"navbar__container",children:[Object(m.jsx)("div",{className:"navbar__logo",children:"Messenger"}),n?"...":t?Object(m.jsxs)("div",{className:"navbar__links",children:[Object(m.jsx)("li",{children:Object(m.jsx)("span",{className:"navbar__img",children:Object(m.jsx)("img",{src:t.photoURL,alt:"user"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("button",{className:"navbar__btn",onClick:r,children:"Logout"})})]}):Object(m.jsx)("div",{className:"navbar__links",children:Object(m.jsx)("li",{children:Object(m.jsx)("button",{className:"navbar__btn",onClick:i,children:"Register with google"})})})]})})},g=t.p+"static/media/chatpic.c150123d.png",p=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"welcome",children:[Object(m.jsx)("h1",{children:"Welcome to messenger"}),Object(m.jsxs)("p",{children:["Chat messages are generally short in order to enable other participants to respond quickly. Thereby, a feeling similar to a spoken conversation is created. Messaging Apps Are Changing the World of Private Communication Messaging apps such as WhatsApp, WeChat, Facebook Messenger.",Object(m.jsx)("span",{className:"auther",children:Object(m.jsx)("h3",{children:"developed by Faizan Ahmad"})})]})]}),Object(m.jsx)("div",{className:"image-box",children:Object(m.jsx)("img",{src:g,alt:"image",className:"image-pic"})})]})},O=function(){var e=a.a.useContext(u).sendMessage,s=new Audio("../chat.mp3"),t=Object(n.useState)(""),c=Object(o.a)(t,2),i=c[0],r=c[1];return Object(m.jsx)("div",{className:"input-form",children:Object(m.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(i,s.play()),r("")},children:[Object(m.jsx)("input",{type:"text",name:"",className:"input__control",placeholder:"write a message....",onChange:function(e){return r(e.target.value)},value:i,required:!0}),Object(m.jsx)("button",{className:"btn",type:"submit",children:"send"})]})})},x=function(){var e=Object(n.useContext)(u),s=e.AllMsg,t=e.user;return Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"messages",children:[Object(m.jsx)(m.Fragment,{children:s.map((function(e){return e.email===t.email?Object(m.jsx)("div",{className:"messages__my right",children:Object(m.jsx)("div",{className:"messages__my-p",children:Object(m.jsx)("p",{children:e.msg})})},e.id):Object(m.jsxs)("div",{className:"messages__other left",children:[Object(m.jsx)("div",{className:"messages__other-img",children:Object(m.jsx)("img",{src:e.photo,alt:e.photo})}),Object(m.jsxs)("div",{className:"messages__other-msg",children:[Object(m.jsx)("span",{children:e.username}),Object(m.jsx)("p",{children:e.msg})]})]},e.id)}))}),Object(m.jsx)(O,{})]})})},v=function(){var e=a.a.useContext(u),s=e.user,t=e.loader;return Object(m.jsx)("div",{className:"container-wel",children:t?"...":s?Object(m.jsx)(x,{}):Object(m.jsx)(p,{})})};var f=function(){return Object(m.jsxs)(b,{children:[Object(m.jsx)(h,{}),Object(m.jsx)(v,{})]})};i.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(f,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.2dacc49f.chunk.js.map